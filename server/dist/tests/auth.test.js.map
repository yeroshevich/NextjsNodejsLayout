{"version":3,"sources":["../../src/tests/auth.test.ts"],"sourcesContent":["import request from 'supertest';\nimport App from '@/app';\nimport { AuthController } from '@controllers/auth.controller';\nimport { CreateUserDto } from '@dtos/users.dto';\n\nafterAll(async () => {\n  await new Promise<void>(resolve => setTimeout(() => resolve(), 500));\n});\n\ndescribe('Testing Auth', () => {\n  describe('[POST] /signup', () => {\n    it('response should have the Create userData', () => {\n      const userData: CreateUserDto = {\n        email: 'test@email.com',\n        password: 'q1w2e3r4',\n      };\n\n      const app = new App([AuthController]);\n      return request(app.getServer()).post('/signup').send(userData);\n    });\n  });\n\n  describe('[POST] /login', () => {\n    it('response should have the Set-Cookie header with the Authorization token', async () => {\n      const userData: CreateUserDto = {\n        email: 'lim@gmail.com',\n        password: 'q1w2e3r4',\n      };\n\n      const app = new App([AuthController]);\n      return request(app.getServer())\n        .post('/login')\n        .send(userData)\n        .expect('Set-Cookie', /^Authorization=.+/);\n    });\n  });\n\n  // error: StatusCode : 404, Message : Authentication token missing\n  // describe('[POST] /logout', () => {\n  //   it('logout Set-Cookie Authorization=; Max-age=0', () => {\n  //     const authRoute = new AuthRoute();\n  //     const app = new App([authRoute]);\n\n  //     return request(app.getServer())\n  //       .post('/logout')\n  //       .expect('Set-Cookie', /^Authorization=\\;/);\n  //   });\n  // });\n});\n"],"names":["afterAll","Promise","resolve","setTimeout","describe","it","userData","email","password","app","App","AuthController","request","getServer","post","send","expect"],"mappings":"AAAA;;;;kDAAoB;4CACJ;gCACe;;;;;;AAG/BA,SAAS,UAAY;IACnB,MAAM,IAAIC,QAAcC,CAAAA,UAAWC,WAAW,IAAMD,WAAW;AACjE;AAEAE,SAAS,gBAAgB,IAAM;IAC7BA,SAAS,kBAAkB,IAAM;QAC/BC,GAAG,4CAA4C,IAAM;YACnD,MAAMC,WAA0B;gBAC9BC,OAAO;gBACPC,UAAU;YACZ;YAEA,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACC,8BAAc;aAAC;YACpC,OAAOC,IAAAA,kBAAO,EAACH,IAAII,SAAS,IAAIC,IAAI,CAAC,WAAWC,IAAI,CAACT;QACvD;IACF;IAEAF,SAAS,iBAAiB,IAAM;QAC9BC,GAAG,2EAA2E,UAAY;YACxF,MAAMC,WAA0B;gBAC9BC,OAAO;gBACPC,UAAU;YACZ;YAEA,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACC,8BAAc;aAAC;YACpC,OAAOC,IAAAA,kBAAO,EAACH,IAAII,SAAS,IACzBC,IAAI,CAAC,UACLC,IAAI,CAACT,UACLU,MAAM,CAAC,cAAc;QAC1B;IACF;AAaF"}